<div id="follow-res" class="block-container">
  <div style="padding-left: 10px;">
    [<a href="https://ram.komica2.net/00/pixmicat.php?res=<%= resNo %>" target="_blank">開啟本串</a>]
  </div>
  <div id="follow-head" is="followBlock" v-for="block in Head" :block="block">
    <div style="text-align: center;">
      <i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>
      <span class="sr-only">Loading...</span>
    </div>
  </div>
  <div id="followBody" is="followBlock" v-for="block in Bodies" :block="block"></div>
</div>

<script type="text/x-template" id="followBlock">
  <div class="dialog" >
    <div>
      <span class="title"><b>{{ block.Title }}</b></span>
      <span class="name"><b>{{ block.Name }}</b></span>
      {{ block.Date }}({{ setupWeekday(block.Date) }}){{ block.Time }}
      ID:{{ block.Id }}
      No.{{ block.No }}
    </div>
    <a class="dialog-img-link" target="_blank" v-if="block.Picture" :href="pictureUrl()">
      <img class="dialog-img" :src="smallPictureUrl()"/>
      <div class="dialog-img-after"></div>
    </a>
    <div class="dialog-img-link" v-if="!block.Picture">
      <img class="dialog-img small"/>
    </div>
    <div class="content">
      <div v-for="line in block.Content.split('\n')">
        <span class="reuse" v-if="line.startsWith('>')">{{ line }}</span>
        <span v-if="!line.startsWith('>')">{{ line }}</span>
      </div>
    </div>
  </div>
</script>

<script>
  window.followResNo = <%= resNo %>
  window.token = '<%= token %>'
</script>
<script src="/js/follow.js?<%= Time.now.to_i %>"></script>
